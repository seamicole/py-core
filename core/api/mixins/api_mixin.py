# ┌─────────────────────────────────────────────────────────────────────────────────────
# │ PROJECT IMPORTS
# └─────────────────────────────────────────────────────────────────────────────────────

from core.api.classes.api import API


# ┌─────────────────────────────────────────────────────────────────────────────────────
# │ API MIXIN
# └─────────────────────────────────────────────────────────────────────────────────────


class APIMixin:
    """An API mixin class"""

    # ┌─────────────────────────────────────────────────────────────────────────────────
    # │ TYPE ALIASES
    # └─────────────────────────────────────────────────────────────────────────────────

    # Define an endpoint list type alias
    Endpoints = list[dict[str, str | dict[str, str]]] | None

    # ┌─────────────────────────────────────────────────────────────────────────────────
    # │ CLASS ATTRIBUTES
    # └─────────────────────────────────────────────────────────────────────────────────

    # Declare type of API base URL
    API_BASE_URL: str

    # ┌─────────────────────────────────────────────────────────────────────────────────
    # │ INSTANCE ATTRIBUTES
    # └─────────────────────────────────────────────────────────────────────────────────

    # Initialize API cache
    _api: API | None = None

    # ┌─────────────────────────────────────────────────────────────────────────────────
    # │ API
    # └─────────────────────────────────────────────────────────────────────────────────

    @property
    def api(self) -> API:
        """Returns a cached or initialized API instance"""

        # Check if cached API instance is None
        if self._api is None:
            # Initialize and set API instance
            self._api = API(base_url=self.API_BASE_URL)

        # Return cached API instance
        return self._api
